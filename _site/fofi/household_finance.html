<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>website - Household Finance</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../maulwurf.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../fofi/fundamentals_of_finance.html">Fundamentals of Finance</a></li><li class="breadcrumb-item"><a href="../fofi/household_finance.html">Household Finance</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">website</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Empirische Wirtschaftsforschung</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ewf/ewf.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">EWF | Übersicht</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ewf/ewf-uebungen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">EWF Übungen</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ewf/ewf-klausurvorbereitung.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">EWF Klausurvorbereitung</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ewf/zeitreihenanalyse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Zeitreihenanalyse</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ewf/methoden-der-ewf.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Methoden der EWF</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Fundamentals of Finance</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../fofi/fundamentals_of_finance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Fundamentals of Finance | Übersicht</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../fofi/cofi_I.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Corporate Finance 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../fofi/household_finance.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Household Finance</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../statistical-machine-learning/sml.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistical Machine Learning</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#derivatebewertung" id="toc-derivatebewertung" class="nav-link active" data-scroll-target="#derivatebewertung">Derivatebewertung</a></li>
  <li><a href="#kapitel-1" id="toc-kapitel-1" class="nav-link" data-scroll-target="#kapitel-1">Kapitel 1</a></li>
  <li><a href="#kapitel-2" id="toc-kapitel-2" class="nav-link" data-scroll-target="#kapitel-2">Kapitel 2</a></li>
  <li><a href="#kapitel-3" id="toc-kapitel-3" class="nav-link" data-scroll-target="#kapitel-3">Kapitel 3</a></li>
  <li><a href="#kapitel-4" id="toc-kapitel-4" class="nav-link" data-scroll-target="#kapitel-4">Kapitel 4</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../fofi/fundamentals_of_finance.html">Fundamentals of Finance</a></li><li class="breadcrumb-item"><a href="../fofi/household_finance.html">Household Finance</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Household Finance</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="derivatebewertung" class="level2">
<h2 class="anchored" data-anchor-id="derivatebewertung">Derivatebewertung</h2>
<hr>
<p><strong>Wie kann man den Preisverlauf einer Aktie oder eines anderen Wertpapiers modellieren?</strong></p>
<p>Der Wert einer Aktie im Zeitpunkt <span class="math inline">\(t\)</span> sei <span class="math inline">\(S\)</span>. Dann ist der Wert im Zeitpunkt <span class="math inline">\(t+dt\)</span> gleich <span class="math inline">\(S+dS\)</span>. <span class="math inline">\(dS\)</span> kann als stochastischer Prozess modelliert werden: <span class="math display">\[
\begin{aligned}
dS &amp;= \mu S \cdot dt + \sigma S \cdot dW \\
\text{mit }W&amp;\sim N(0, t) \\
dW &amp;\sim N(0, \sqrt{t})
\end{aligned}
\]</span> <span class="math inline">\(\mu\)</span> ist der Drift bzw. die erwartete Rendite der Aktie und <span class="math inline">\(\sigma\)</span> die Standardabweichung. Führt man damit eine Monte-Carlo Simulation durch, d.h. man zieht verschiedene Werte für <span class="math inline">\(dW\)</span>, erhält man beispielsweise folgende Pfade. Ein Pfad wurde beispielhaft rot eingefärbt. <img src="./assets/brownian-motion.png" class="img-fluid" alt="Brownian Motion"></p>
<hr>
<p><strong>Wie wird der Payoff einer europäischen Call-Option bestimmt?</strong></p>
<p>Der Payoff ergibt sich als <span class="math inline">\((S(T)-K)^+\)</span>. Dabei ist <span class="math inline">\(S(T)\)</span> der Wert des Underlyings bzw. der Aktie am Tag der Fälligkeit <span class="math inline">\(T\)</span> und <span class="math inline">\(K\)</span> ist der vorher vereinbarte Strike Preis. Wenn <span class="math inline">\(S(T)\)</span> kleiner ist als <span class="math inline">\(K\)</span>, so gibt es keinen Payoff und die Option ist wertlos. Liegt <span class="math inline">\(S(T)\)</span> über <span class="math inline">\(K\)</span>, so ist die Differenz der Payoff.</p>
<hr>
<p><strong>Wie kann man ein Portfolio bilden, das das Verhalten einer europäischen Option über einen bestimmten Zeitraum (hier eine Periode des Binomialbaums) perfekt nachbildet, wenn man nur die Aktie und ein (risikoloses) Geldkonto verwendet?</strong></p>
<p>Man befindet sich am Anfang einer Periode und der Aktienkurs im Wert von <span class="math inline">\(S\)</span> kann sich in einem der beiden Zustände entwickeln: <span class="math inline">\(S_u = u S\)</span> oder <span class="math inline">\(S_d = d S\)</span>.</p>
<p>Bezeichnen wir <span class="math inline">\(\Pi\)</span> als ein solches Portfolio. <span class="math inline">\(\Pi\)</span> bestehe aus <span class="math inline">\(\alpha\)</span> Aktien der Aktie und <span class="math inline">\(\beta\)</span> in bar. Sowohl <span class="math inline">\(\alpha\)</span> als auch <span class="math inline">\(\beta\)</span> können positiv oder negativ sein, je nachdem, ob man Aktien besitzt/verkauft oder Bargeld leiht/verleiht. Der Wert von <span class="math inline">\(\Pi\)</span> ist also <span class="math display">\[\Pi = \alpha S + \beta\]</span> Um <span class="math inline">\(\alpha\)</span> und <span class="math inline">\(\beta\)</span> zu bestimmen, nehmen wir an, dass die Option am Ende einer Periode <span class="math inline">\(V_u\)</span> im Aufwärtszustand und <span class="math inline">\(V_d\)</span> im Abwärtszustand wert ist. Da wir wollen, dass sich unser Portfolio repliziert, wollen wir, dass sich sein Wert <span class="math inline">\(\Pi\)</span> zu genau denselben Zuständen entwickelt, d.h. <span class="math inline">\(\Pi_u = V_u\)</span> und <span class="math inline">\(\Pi_d = V_d\)</span>. Daraus ergeben sich zwei Gleichungen: <span class="math display">\[
\begin{aligned}
\Pi_u &amp;= \alpha S_u + \beta (1 + R) = V_u \\
\Pi_d &amp;= \alpha S_d + \beta (1 + R) = V_d
\end{aligned}
\]</span> - Die Aktienkomponente des Portfolios <span class="math inline">\(\Pi\)</span> hat sich von <span class="math inline">\(\alpha S\)</span> zu <span class="math inline">\(\alpha S_u\)</span> oder <span class="math inline">\(\alpha S_d\)</span> entwickelt, weil sich der Aktienkurs entwickelt hat. - Der Bargeldbetrag <span class="math inline">\(\beta\)</span>, der zu Beginn der Periode geliehen/verliehen wurde, hat uns Zinsen gekostet/verdient, daher der Faktor <span class="math inline">\(1+R\)</span>.</p>
<p>Löst man diese zwei Gleichungen für die zwei Unbekannten <span class="math inline">\(\alpha\)</span> und <span class="math inline">\(\beta\)</span> erhält man: <span class="math display">\[
\begin{aligned}
\alpha &amp;= \frac{V_u - V_d}{S_u-S_d} \\
\beta &amp;= \frac{1}{1+R} \frac{u V_d - d V_u}{(u-d)}
\end{aligned}
\]</span> Daraus ergibt sich die Anzahl der Aktien (<span class="math inline">\(\alpha\)</span>), die man kaufen/verkaufen müsste, und die Anzahl der Barmittel (<span class="math inline">\(\beta\)</span>), die man leihen/verleihen müsste, um die Option perfekt zu replizieren.</p>
<p>Erklärung von <a href="https://quant.stackexchange.com/questions/25094/replication-strategy-of-european-call-option">Stack Exchange – Quantitative Finance</a></p>
<hr>
</section>
<section id="kapitel-1" class="level2">
<h2 class="anchored" data-anchor-id="kapitel-1">Kapitel 1</h2>
<hr>
<p><strong>Wie sieht das CAPM aus?</strong></p>
<p>Das CAPM Modell sieht wie folgt aus: <span class="math display">\[
\begin{aligned}
E(R_i) &amp;= R_f + \left(E[R_M] - R_f \right)\cdot \beta_i \\
\text{mit }\beta_i &amp;= \frac{cov(R_i, R_M)}{var(R_M)}
\end{aligned}
\]</span> <span class="math inline">\(R_f\)</span> steht dabei für den risikofreien Zinssatz/Rendite<span class="math inline">\(, R_i\)</span> steht für die Rendite eines einzelnen Wertpapiers <span class="math inline">\(i\)</span> und <span class="math inline">\(R_M\)</span> für die Marktrendite. Die Differenz aus der Marktrendite und dem risikofreien Zins wird <em>Marktrisikoprämie</em> genannt. Das <span class="math inline">\(\beta_i\)</span> beschreibt die Volatilität bzw. das Risiko von <span class="math inline">\(i\)</span> im Vergleich zum Markt. Die erwartete Rendite von Wertpapier <span class="math inline">\(i\)</span> also die risikofreie Rendite plus einer Risikoprämie, welche <span class="math inline">\(\beta_i\)</span> mal Differenz aus <span class="math inline">\(E[R_M]\)</span> und <span class="math inline">\(R_f\)</span> ist.</p>
<p>Ist die Volatilität von <span class="math inline">\(i\)</span> also gleich der des Marktes, ergibt sich als erwartete Rendite die (erwartete) Marktrendite: <span class="math display">\[
\begin{aligned}
E(R_i) &amp;= R_f + \left(E[R_M] - R_f \right)\cdot 1 \\
&amp;= R_f + E[R_M] - R_f \\
&amp;= E[R_M]
\end{aligned}
\]</span> Ist das Risiko von <span class="math inline">\(i\)</span> geringer (<span class="math inline">\(\beta_i&lt;1\)</span>), dann liegt die erwartete Rendite unter der des Marktes.</p>
<hr>
<p><strong>Welche Implikationen des CAPM lassen sich testen?</strong></p>
<ol type="1">
<li>Beziehung zwischen erwarteter Rendite und Risiko ist linear.</li>
<li><span class="math inline">\(\beta_i\)</span> ist vollständiges Maß für Risiko.</li>
<li>Höheres Risiko ist mit höherer erwarteter Rendite verbunden.</li>
</ol>
<hr>
<p><strong>Wie haben Fama/MacBeth das CAPM getestet? Erklären Sie mögliche Probleme der Testweise.</strong></p>
<p><em>Folie 36-39</em> Fama/MacBeth haben das CAPM mit monatlichen Aktienkursdaten aller an der NYSE notierten Aktien von 1926-1968 getestet. Sie haben die Betas der Aktien über 4 Jahre geschätzt, dann in aufsteigender Reihenfolge 20 Portfolios gebildet, die Betas innerhalb der Portfolios gemittelt und schließlich das CAPM über 4 Jahre mit den durchschnittlichen Betas getestet. Probleme dieser Testweise sind möglicherweise Heteroskedastizität, Intervalling und fehlende Stationarität der Renditen.</p>
<p><a href="https://www.simtrade.fr/blog_simtrade/fama-macbeth-two-step-regression-method/">Hier</a> ist ein anschaulicher Blogeintrag dazu. Diese Vorgehen bringt jedoch empirische Schwierigkeiten mit sich, insbesondere Heteroskedastizität, Intervalling und fehlende Stationaritä der Rendite-Zeitreihen.</p>
<hr>
<p><strong>Was ist die akademische Sicht auf spekulative Blasen?</strong></p>
<p><em>Folie 50-66</em> Die akademische Sicht ist, dass es keine eindeutigen Nachweise für das Vorliegen spekulativer Blasen gibt. Starke Preisrückgänge werden oft als rationale Reaktion auf Änderungen bei Fundamentaldaten interpretiert. Ökonometrische Studien zeigen zwar kurzfristige Abweichungen von Fundamentalwerten, die als platzende Blasen gedeutet werden könnten, aber der Nachweis bleibt schwierig.</p>
<hr>
<p><strong>Die experimentelle Studie von Caginalp, Porter und Smith (2000) untersucht, ob an Kapitalmärkten spekulative Blasen entstehen können. Erläutern Sie kurz den Experimentaufbau und skizzieren Sie dann die zentralen Ergebnisse für unterschiedliche Teilnehmergruppen.</strong></p>
<p><em>Folie 67-68</em> Caginalp et al.&nbsp;haben in einem Experiment mit 15 Handelsperioden für ein Dividendenpapier ohne Restwert spekulative Blasen in Abhängigkeit von der Zusammensetzung der Teilnehmergruppen untersucht. Bei rein rationalen Teilnehmern entstand keine Blase. Bei teilnehmenden CEOs und Undergraduates jedoch entstanden im Laufe des Experiments Blasen, die zum Ende hin platzten.</p>
<hr>
<p><strong>Welche Kursreaktionen wurden auf die Ausstrahlung von CEO Interviews im Amerikanischen Nachrichtenkanal CNBC beobachtet? Wie lassen sich diese Kursreaktionen erklären?</strong></p>
<p><em>Folie 71-80</em> Bei CEO-Interviews auf CNBC wurden signifikant positive Überrenditen am Tag der Ausstrahlung sowie deutlich erhöhte Handelsvolumina beobachtet. Dies lässt darauf schließen, dass in den Interviews wohl neue Informationen vermittelt werden, die noch nicht im Aktienkurs enthalten waren.</p>
<hr>
</section>
<section id="kapitel-2" class="level2">
<h2 class="anchored" data-anchor-id="kapitel-2">Kapitel 2</h2>
<hr>
<p><strong>Was ist die Entscheidungsgrundlage der Erwartungsnutzentheorie?</strong></p>
<p><em>Folie 7</em>-21 Die Entscheidungsgrundlage der Erwartungsnutzentheorie ist ein Axiomensystem zur Ableitung einer Präferenz. Wenn die Präferenz eines Entscheiders die Axiome der vollständigen Ordnung, der Stetigkeit und bei riskanten Alternativen der Unabhängigkeit erfüllt, dann existiert eine Nutzenfunktion, deren Erwartungsnutzen die Präferenz abbildet.</p>
<hr>
<p><strong>Nennen Sie die drei der Erwartungsnutzentheorie zu Grunde liegenden Axiome. Erklären Sie diese anhand eines Beispiels.</strong></p>
<p><em>Folie 10-13</em> Die drei der Erwartungsnutzentheorie zugrunde liegenden Axiome sind:</p>
<ul>
<li>Das Axiom der vollständigen Ordnung besagt, dass für jedes Lotteriepaar eine eindeutige Präferenzrelation gilt (entweder A &lt; B oder B &lt; A) und diese Präferenz transitiv ist (aus A &lt; B und B &lt; C folgt A &lt; C).</li>
<li>Das Axiom der Stetigkeit besagt, dass sich für zwei Lotterien durch Mischen eine dritte Lotterie konstruieren lässt, die genau zwischen den beiden anderen liegt.</li>
<li>Das Axiom der Unabhängigkeit (Substitution) besagt, dass die Präferenz zwischen zwei Lotterien unabhängig von einer dritten Lotterie ist.</li>
</ul>
<hr>
<p><strong>Skizzieren Sie die Nutzenfunktionen für risikofreudige, risikoneutrale und risikoscheue Anleger und begründen Sie die Lage der Kurven mit Bezug auf das Risikopotential.</strong></p>
<p><em>Folie 15-21</em> Die Nutzenfunktion für einen risikofreudigen Anleger ist konvex, da er das Risiko einer Lotterie positiv bewertet. Die Nutzenfunktion eines risikoneutralen Anlegers ist linear, da er dem Risiko einer Lotterie gleichgültig gegenübersteht. Die Nutzenfunktion eines risikoscheuen Anlegers ist konkav, da er das Risiko einer Lotterie negativ bewertet.</p>
<p>Für die Lotterie gilt <span class="math inline">\(RP(a) = E(a) - SÄ(a)\)</span>, wobei <span class="math inline">\(RP\)</span> die Risikoprämie, <span class="math inline">\(E\)</span> der Erwartungswert und <span class="math inline">\(SÄ\)</span> das Sicherheitsäquivalent ist.</p>
<table class="table">
<thead>
<tr class="header">
<th>Nutzenfunktion</th>
<th><span class="math inline">\(RP\)</span></th>
<th>Risikoeinstellung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>linear</td>
<td><span class="math inline">\(=0\)</span></td>
<td>risikoneutral</td>
</tr>
<tr class="even">
<td>konkav</td>
<td><span class="math inline">\(&gt;0\)</span></td>
<td>risikoscheu</td>
</tr>
<tr class="odd">
<td>konvex</td>
<td><span class="math inline">\(&lt;0\)</span></td>
<td>risikofreudig</td>
</tr>
</tbody>
</table>
<hr>
<p><strong>Die theoretische Fundierung der Behavioral Finance basiert auf der Prospect Theory, die in drei wesentlichen Elementen von der klassischen Entscheidungstheorie abweicht. Beschreiben Sie diese drei Elemente</strong></p>
<p><em>Folie 57-58</em> Die Prospect Theory weicht von der klassischen Entscheidungstheorie in drei wesentlichen Punkten ab:</p>
<ol type="1">
<li>Editing Phase: Der Entscheider editiert die Alternativen vor der Bewertung durch Coding, Segregation, Combination etc.</li>
<li>Wertfunktion: Die Wertfunktion ist konkav im Gewinnbereich und konvex im Verlustbereich.</li>
<li>Wahrscheinlichkeitsgewichtung: Entscheider ordnen Wahrscheinlichkeiten ein subjektives Gewicht zu.</li>
</ol>
<hr>
<p><strong>Wie sieht die Nutzenfunktion in der Prospect Theory aus?</strong></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://upload.wikimedia.org/wikipedia/commons/8/85/Loss_Aversion.png" class="img-fluid figure-img"></p>
<figcaption>utility-function</figcaption>
</figure>
</div>
<hr>
<p><strong>Das Unternehmen XY fürchtet eine feindliche Übernahme, welche mit einer Wahrscheinlichkeit von 2% eintritt. Daher entwickelt es einen HTO-Indikator, der die Börsendaten analysiert und warnt, wenn ein feindlicher Übernahmeversuch bevorsteht. Allerdings erkennt der Indikator 8% der geplanten Übernahmen nicht und warnt in 5% der Fälle, in denen gar keine Übernahme geplant ist. Das Unternehmen möchte sich sicher sein, dass mit einer Wahrscheinlichkeit von mindestens 80% tatsächlich eine Übernahme bevorsteht, wenn der Indikator ein Warnsignal gibt. Erfüllt der entwickelte Indikator diese Bedingung?</strong></p>
<p><em>Folie 22-36</em> Zuerst schreiben wir auf, was aus der Aufgabenstellung bekannt ist. <span class="math inline">\(Ü\)</span> steht für eine Übernahme und <span class="math inline">\(W\)</span> für eine Warnung. <span class="math display">\[
\begin{aligned}
p(Ü)&amp;=0.02 \Rightarrow p(\overline{Ü})=0.98 \\
p(\overline{W}|Ü)&amp;=0.08 \Rightarrow p(W|Ü)=0.92\\
p(W|\overline{Ü})&amp;=0.05 \Rightarrow p(\overline{W}|\overline{Ü})=0.95\\
\end{aligned}
\]</span> Gesucht ist <span class="math inline">\(p(Ü|W)\)</span>.</p>
<p>Zum Beantworten dieser Frage benutzen wir den Satz von Bayes: <span class="math display">\[
\begin{aligned}
p(a|b) &amp;= \frac{p(b|a) \cdot p(a)}{p(b)} \\
\text{mit } p(b)&amp;=p(b|a)\cdot p(a) + p(b|\overline{a})\cdot p(\overline{a})
\end{aligned}
\]</span> Zuerst müssen wir noch die totale Wahrscheinlichkeit <span class="math inline">\(p(W)\)</span> berechnen: <span class="math display">\[
\begin{aligned}
p(W)&amp;=p(W|Ü)\cdot p(Ü) + p(W|\overline{Ü})\cdot p(\overline{Ü}) \\
&amp;= 0.92\cdot 0.02 + 0.05\cdot 0.98 \\
&amp;= 0.0674
\end{aligned}
\]</span> Nun lässt sich die gesuchte Wahrscheinlichkeit bestimmen: <span class="math display">\[
\begin{aligned}
p(Ü|W) &amp;= \frac{p(W|Ü)\cdot p(Ü)}{p(W)} \\
&amp;= \frac{0.92 \cdot 0.02}{0.0674} \\
&amp;= 0.273
\end{aligned}
\]</span> Die Wahrscheinlichkeit, dass eine Übernahme bevorsteht, wenn das System eine Warnung ausgibt, liegt demnach bei knapp 27% und somit unter den gewünschten 80%.</p>
<hr>
</section>
<section id="kapitel-3" class="level2">
<h2 class="anchored" data-anchor-id="kapitel-3">Kapitel 3</h2>
<hr>
<p><strong>Erläutern Sie die Idee einer Regression zum Durchschnitt. Was bedeutet das für die zu erwartende Rendite am deutschen Aktienmarkt im Jahr 2007? Erklären Sie in diesem Zusammenhang den Monte-Carlo-Effekt als heuristisch bedingte Verzerrung.</strong></p>
<p><em>Folie 7</em> Die Idee einer Regression zum Durchschnitt besagt, dass auf Jahre mit überdurchschnittlichen Renditen am Aktienmarkt Jahre mit unterdurchschnittlichen Renditen folgen werden. Für 2007 wäre demnach nach Jahren hoher Renditen am deutschen Aktienmarkt mit einer Rendite unter dem langfristigen Durchschnitt zu rechnen. Der Monte-Carlo-Effekt ist eine heuristisch bedingte Verzerrung, bei der Investoren irrtümlich annehmen, dass eine zufällige Sequenz (z.B. Kopf-Zahl beim Münzwurf) einem repräsentativen Muster folgen müsse. Dies führt zu Fehleinschätzungen von Wahrscheinlichkeiten.</p>
<hr>
<p><strong>Wie erklärt Terrance Odean (1998) die schwachen Lerneffekte bei Overconfidence im Zeitablauf?</strong></p>
<p><em>Folie 28</em> Laut Terrance Odean lernt Overconfidence nur langsam ab, da das Feedback an den Finanzmärkten oft langsam und verrauscht ist. Schnelles und klares Feedback ist aber nötig für schnelles Lernen. Daher kalibriert sich das Vertrauen in die eigenen Fähigkeiten an den Finanzmärkten nur langsam.</p>
<hr>
<p><strong>Was ist der self-serving Bias? Welche Theorien erklären ihn und welche Faktoren treiben ihn? Welche Auswirkungen hat er?</strong></p>
<p><em>Folie 30-34</em> Der self-serving Bias ist die Tendenz, Erfolge eher internalen Faktoren wie eigenen Fähigkeiten zuzuschreiben und Misserfolge eher externalen Faktoren. Er wird durch Motivationstheorien (Schutz des Selbstwertgefühls) und Informationsverarbeitungstheorien (verzerrte Informationsbewertung) erklärt. Getrieben wird er u.a. durch Alter, Kultur und Erfahrung. Er kann zu überhöhtem Selbstbewusstsein und suboptimalen Entscheidungen führen.</p>
<hr>
<p><strong>Führende amerikanische Finanzprofessoren sind der Meinung, dass Overconfidence das bedeutendste psychologisch bedingte Problem an den internationalen Kapitalmärkten ist.</strong> 1. <strong>Erläutern Sie, was Overconfidence ist und wie es zum Ausdruck kommt.</strong> 2. <strong>Warum verschwindet Overconfidence an Kapitalmärkten nicht schnell durch konsequentes Lernen?</strong> 3. <strong>Overconfidence ist nicht immer gleich stark ausgeprägt. Welche Unterschiede zwischen verschiednen Gruppen von Kapitalmarktteilnehmern wurden festgestellt?</strong></p>
<p><em>Folie 16-29</em> 1. Overconfidence bedeutet, dass Investoren ihre Fähigkeiten und Kenntnisse bei Prognosen überschätzen. Dies kommt z.B. zum Ausdruck in zu engen Prognoserisikobändern und der Annahme, den Markt übertreffen zu können. 2. Overconfidence verschwindet laut Terrance Odean nicht schnell, da das Feedback an Kapitalmärkten oft verzögert und verrauscht ist. Für schnelles Lernen wäre aber klares, zeitnahes Feedback nötig. 3. Jüngere, unerfahrene Investoren sowie Männer zeigen tendenziell mehr Overconfidence. Kulturell ist sie in Asien stärker verbreitet als in den USA.</p>
<hr>
<p><strong>Was besagen die Phänomene “Verlustaversion” und “mentale Konten” und weshalb können sie sich negativ auf Portfolio-Renditen auswirken?</strong></p>
<p><em>Folie 66-75</em> Verlustaversion bedeutet, dass Verluste stärker gewichtet werden als Gewinne. Dies führt dazu, dass Verluste nicht realisiert werden (Dispositionseffekt). Mentale Konten bedeuten, dass Anleger separate Konten für einzelne Investments führen und das Gesamtportfolio nicht optimieren. Beide Phänomene können zu einer suboptimalen Portfoliozusammensetzung und Depotumschichtungen führen, die die Rendite schmälern.</p>
<hr>
<p><strong>Milton Friedman stellte 1953 fest, dass jede Preisabweichung eine attraktive Investmentmöglichkeit generiert und dass rationale Investoren sofort attraktive Investments erkennen und entsprechend handeln. Diese Aussage ist in ihrer Gesamtheit fragwürdig. Erläutern Sie, warum sie fragwürdig ist und geben Sie die Risiken an, die beim Ausnutzen von Fehlbewertungen am Aktienmarkt im Kalkül berücksichtigt werden müssen.</strong></p>
<p><em>Folie 6</em> Die Aussage ist fragwürdig, da Investoren aufgrund von heuristischen Verzerrungen und begrenzter Rationalität Preisabweichungen nicht immer korrekt als Investmentchancen erkennen und nicht immer entsprechend handeln. Risiken beim Ausnutzen von Fehlbewertungen sind z.B. unbekannte Risiken der Aktie, Behavioral Risks wenn sich die Fehlbewertung verstärkt statt abschwächt und Liquiditätsrisiken, wenn die Aktie nicht handelbar ist.</p>
<hr>
<p><strong>Beschreiben Sie die Annahmen und Hauptaussagen der neoklassischen Spartheorie.</strong></p>
<p><em>Folie 80</em> Annahmen: - Rationalität - rationale Erwartungen - intertemporale Nutzenmaximierung - Selbstkontrolle</p>
<p>Hauptaussagen: - Dreieckiger Verlauf des Vermögenspfads - Unabhängigkeit des Konsums von Einkommen - Gleichlauf von Konsum- und Einkommensverlauf</p>
<hr>
<p><strong>Wie funktionieren gesetzliche und private Krankenversicherungen und in welchen Punkten unterscheiden sie sich?</strong></p>
<p><em>Folie 87</em> Die gesetzliche Krankenversicherung ist pflichtversichert mit einkommensabhängigen Beiträgen. Die private Krankenversicherung ist freiwillig mit risikoabhängigen Beiträgen. Die gesetzliche Krankenversicherung übernimmt alle gesetzlich festgeschriebenen Leistungen, die private leistet nur vertraglich festgelegte Leistungen.</p>
<hr>
</section>
<section id="kapitel-4" class="level2">
<h2 class="anchored" data-anchor-id="kapitel-4">Kapitel 4</h2>
<hr>
<p><strong>Momentumstrategien basieren auf einem Mittelfristigen Anlagehorizont und unterstellen, dass Aktienrenditen zumindest in Teilen vorhersagbar sind.</strong> 1. <strong>Erläutern Sie die allgemeine Vorgehensweise dieser mittelfristigen Anlagestrategien.</strong> 2. <strong>Welche Erklärungsansätze für den Erfolg dieser Strategien wurden überprüft, um die Resultate im Einklang mit der Theorie effizienter Kapitalmärkte zu erklären? Welche Ergebnisse wurden für diese Erklärungsansätze gefunden?</strong> 3. <strong>Welche Erklärungsmöglichkeit bietet die Behavioral Finance an?</strong></p>
<ol type="1">
<li><em>Folie 11</em>
<ol type="1">
<li>Es wird eine Formationsperiode definiert (typischerweise 3-12 Monate).</li>
<li>In dieser Periode werden die Aktien nach ihrer Rendite sortiert.</li>
<li>Nach der Formationsperiode werden die Aktien mit der besten Rendite gekauft und die mit der schlechtesten Leerverkauft. Die Positionen werden dann für einen bestimmten Zeitraum (z.B. 3 oder 6 Monate) gehalten.</li>
</ol></li>
<li><em>Folie 19</em>
<ol type="1">
<li>Zufall ist es nicht, die Signifikanz der Ergebnisse wurde statistisch überprüft.</li>
<li>Marktfriktionen wie Transaktionskosten, Illiquidität und Leerverkaufsbeschränkungen können die Rentabilität dieser Strategie einschränken.</li>
<li>Risiko: Es wurde untersucht, ob die Gewinner-Aktien risikoreicher sind. Die Ergebnisse zeigten aber, dass die Risikoadjustierung die Überrenditen der Gewinner-Aktien nicht erklären kann.</li>
</ol></li>
<li><em>Folie 21</em> Die Behavioral Finance erklärt den Erfolg durch systematische Fehler in der Informationsverarbeitung. Es kommt zu einer zu langsamen Anpassung der Erwartungen an neue Informationen.</li>
</ol>
<hr>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>